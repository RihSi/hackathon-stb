(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/hackathon-stb/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},1799:function(t,e,a){t.exports=a.p+"img/treasure.acdb0b1f.png"},"1a04":function(t,e,a){t.exports=a.p+"img/jackpot.966ee52c.png"},2:function(t,e){},3:function(t,e){},4:function(t,e){},"4f49":function(t,e,a){"use strict";a("6a82")},5:function(t,e){},"50e6":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},s=[],i=(a("b0c0"),a("96cf"),a("1da1")),o=a("76b0"),c=a.n(o),l=a("0926"),u={name:"App",data:function(){return{network:null,rpc:null,eos:null,account:{},currency:null,isConnected:!1,isLogin:!1,rounds:{},liveRoundList:[]}},methods:{connect:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.a.connect("ahkui-steve",{network:t.network});case 2:if(t.isConnected=e.sent,t.isConnected){e.next=5;break}throw new Error("Could not connect to Scatter.");case 5:case"end":return e.stop()}}),e)})))()},login:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isConnected){e.next=9;break}return e.next=3,c.a.login();case 3:if(t.isLogin=e.sent,t.isLogin){e.next=6;break}throw new Error("login error");case 6:t.account=c.a.account("eos"),t.getBalance(),t.balanceInterval=setInterval(t.getBalance,1e3);case 9:case"end":return e.stop()}}),e)})))()},getBalance:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isConnected||!t.isLogin){e.next=4;break}return e.next=3,t.rpc.get_currency_balance("eosio.token",t.account.name,"EOS");case 3:t.currency=e.sent[0];case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.network=c.a.Network.fromJson({blockchain:"eos",protocol:"https",port:443,chainId:"8a34ec7df1b8cd06ff4a8abbaa7cc50300823350cadc59ab296cb00d104d2b8f",host:"eos.ahkui.com"}),this.rpc=new l["JsonRpc"](this.network.fullhost()),t.prev=2,t.next=5,this.connect();case 5:return t.next=7,this.login();case 7:this.eos=c.a.eos(this.network,l["Api"],{rpc:this.rpc,beta3:!0}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),console.error(t.t0);case 13:case"end":return t.stop()}}),t,this,[[2,10]])})));function e(){return t.apply(this,arguments)}return e}()},d=u,p=a("2877"),v=Object(p["a"])(d,r,s,!1,null,null,null),h=v.exports,f=a("8c4f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-navigation-drawer",{attrs:{app:"",dark:"",color:"#1E1E1E"}},[a("v-sheet",{staticClass:"pa-4",attrs:{dark:""}},[a("v-avatar",{staticClass:"mb-4",attrs:{color:"grey darken-1",size:"64"}}),a("div",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.$parent.account?t.$parent.account.name:"")+" ")]),a("div",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.$parent.currency)+" ")])],1),a("v-divider"),a("v-list",[a("v-list-item",{attrs:{link:""}},[a("v-list-item-icon",[a("v-icon",{staticClass:"amber--text",attrs:{large:""}},[t._v("mdi-history")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold text-h6"},[t._v("歷史紀錄")])],1)],1)],1)],1),a("v-main",{staticClass:"dark-bg"},[a("v-container",{staticClass:"py-8 px-6",attrs:{fluid:""}},[a("v-row",{attrs:{dark:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{dark:""}},[a("v-subheader",{staticClass:"white--text font-weight-bold text-h5"},[t._v("當前房間")]),a("v-list",{attrs:{"two-line":""}},[t._l(t.rounds,(function(e,n){return[a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-h4"},[t._v(" 房間 #"+t._s(e.id)+" "),a("v-btn",{staticClass:"amber font-weight-bold",attrs:{to:{name:"room",params:{id:e.id}},rounded:""}},[t._v("進入房間")])],1),a("v-simple-table",{attrs:{dark:""}},[a("thead",[a("tr",[a("th",[t._v("座位狀況")]),a("th",{staticClass:"text-center font-weight-bold"},[t._v("1")]),a("th",{staticClass:"text-center font-weight-bold"},[t._v("2")]),a("th",{staticClass:"text-center font-weight-bold"},[t._v("3")]),a("th",{staticClass:"text-center font-weight-bold"},[t._v("4")]),a("th",{staticClass:"text-center font-weight-bold"},[t._v("5")]),a("th",{staticClass:"text-center font-weight-bold"},[t._v("6")]),a("th",{staticClass:"text-center font-weight-bold"},[t._v("7")]),a("th",{staticClass:"text-center font-weight-bold"},[t._v("8")]),a("th",{staticClass:"text-center font-weight-bold"},[t._v("9")]),a("th",{staticClass:"text-center font-weight-bold"},[t._v("10")])])]),a("tbody",[a("tr",[a("td",[t._v(" 已被購買"),a("v-icon",{staticClass:"red--text"},[t._v("mdi-close")]),t._v(" / 可購買"),a("v-icon",{staticClass:"teal--text"},[t._v("mdi-check")])],1),t._l(e.seats,(function(e,n){return a("td",{key:n,staticClass:"text-center font-weight-bold"},[e.status?a("v-icon",{staticClass:"red--text"},[t._v("mdi-close")]):a("v-icon",{staticClass:"teal--text"},[t._v("mdi-check")])],1)}))],2)])])],1)],1),a("v-divider",{key:"divider-"+n,attrs:{inset:""}})]}))],2)],1)],1)],1)],1)],1)],1)},b=[],g=(a("d81d"),a("13d5"),a("d3b7"),a("3ca3"),a("ddb0"),a("ade3")),x=a("5530"),_={name:"Hall",data:function(){return{rounds:{},liveRoundList:[]}},computed:{},methods:{fetchLiveRoom:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$parent.rpc.get_table_rows({json:!0,code:"stb",scope:"stb",table:"liverounds",limit:5});case 2:a=e.sent,t.liveRoundList=a.rows.map((function(t){return t.id}));case 4:case"end":return e.stop()}}),e)})))()},fetchRoom:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.liveRoundList.map((function(e){return t.$parent.rpc.get_table_rows({json:!0,code:"stb",scope:"stb",table:"rounds",lower_bound:e,limit:1})})));case 2:a=e.sent,t.rounds=a.reduce((function(t,e){return Object(x["a"])(Object(x["a"])({},t),{},Object(g["a"])({},e.rows[0].id,e.rows[0]))}),{});case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:void 0!=this.liveInterval&&(clearInterval(this.liveInterval),this.liveInterval=void 0),this.liveInterval=setInterval(this.fetchLiveRoom,1e3),void 0!=this.fetchRoomInterval&&(clearInterval(this.fetchRoomInterval),this.fetchRoomInterval=void 0),this.fetchRoomInterval=setInterval(this.fetchRoom,1e3);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},w=_,C=(a("cf29"),a("6544")),y=a.n(C),k=a("7496"),S=a("8212"),P=a("8336"),O=a("b0af"),V=a("62ad"),R=a("a523"),j=a("ce7e"),T=a("132d"),I=a("8860"),$=a("da13"),D=a("5d23"),E=a("34c3"),L=a("f6c4"),z=a("f774"),B=a("0fd9"),N=a("8dd9"),A=a("1f4f"),J=a("e0c7"),M=Object(p["a"])(w,m,b,!1,null,null,null),H=M.exports;y()(M,{VApp:k["a"],VAvatar:S["a"],VBtn:P["a"],VCard:O["a"],VCol:V["a"],VContainer:R["a"],VDivider:j["a"],VIcon:T["a"],VList:I["a"],VListItem:$["a"],VListItemContent:D["a"],VListItemIcon:E["a"],VListItemTitle:D["b"],VMain:L["a"],VNavigationDrawer:z["a"],VRow:B["a"],VSheet:N["a"],VSimpleTable:A["a"],VSubheader:J["a"]});var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("AppBar",{attrs:{seatData:t.seatData,account:t.$parent.account,currency:t.$parent.currency,funds:t.funds}}),a("Seats",{attrs:{seatData:t.seatData},on:{onPurchase:t.onPurchase}}),a("Roulette",{ref:"spinner"}),a("Dialog"),a("Toast",{ref:"popup"})],1)},F=[],G=(a("99af"),a("4160"),a("ac1f"),a("25f0"),a("5319"),a("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("v-app-bar",{attrs:{app:"",dark:"",dense:"",flat:""}},[n("v-toolbar-title",[n("span",{staticClass:"mx-1"},[n("v-icon",{staticClass:"amber--text",attrs:{"x-large":""}},[t._v(" mdi-account-circle-outline ")]),n("span",{staticClass:"mx-1"},[t._v(t._s(t.account.name))])],1),n("span",{staticClass:"mx-1"},[n("v-icon",{staticClass:"amber--text",attrs:{"x-large":""}},[t._v(" mdi-currency-usd-circle-outline ")]),n("span",{staticClass:"mx-1"},[t._v(t._s(t.currency))])],1)]),n("v-spacer"),n("v-btn",{staticClass:"amber--text",attrs:{to:{name:"hall"},icon:"",rounded:"","x-large":""}},[n("v-icon",{attrs:{large:""}},[t._v("mdi-home")])],1),n("v-btn",{staticClass:"font-weight-bold amber--text",attrs:{large:""},on:{click:function(e){t.expandTable=!t.expandTable}}},[t._v(" 座位 & 賠率表 "),t.expandTable?n("v-icon",{staticClass:"white--text",attrs:{"x-large":""}},[t._v(" mdi-chevron-up ")]):n("v-icon",{staticClass:"white--text",attrs:{"x-large":""}},[t._v(" mdi-chevron-down ")])],1)],1),n("v-card",{staticClass:"mx-auto",staticStyle:{position:"fixed",left:"340px",top:"60px","z-index":"80","border-radius":"15px !important",border:"1px solid orange"},attrs:{width:"20%",elevation:"0",dark:""}},[n("v-img",{attrs:{contain:"",src:a("1a04")}},[n("vns",{staticClass:"jackpot-value font-weight-bold white--text text-right",staticStyle:{"font-family":"'Lobster', cursive !important","letter-spacing":"12px !important"},attrs:{start:0,end:t.funds,times:69,speed:25}})],1)],1),n("v-expand-transition",[n("v-simple-table",{directives:[{name:"show",rawName:"v-show",value:t.expandTable,expression:"expandTable"}],staticClass:"odds-table",attrs:{dark:"",dense:""}},[n("thead",[n("th",{staticClass:"text-center font-weight-bold"},[t._v("購買")]),n("th",{staticClass:"text-center font-weight-bold"},[t._v("RTP")]),n("th",{staticClass:"text-center font-weight-bold"},[t._v("A池")]),n("th",{staticClass:"text-center font-weight-bold"},[t._v("B池")]),n("th",{staticClass:"text-center font-weight-bold"},[t._v("C池")]),n("th",{staticClass:"text-center font-weight-bold"},[t._v("D池")])]),n("tbody",t._l(t.seatData,(function(e,a){return n("tr",{key:a},[n("td",[e.purchased?n("v-icon",{staticClass:"red--text"},[t._v("mdi-close")]):n("v-icon",{staticClass:"teal--text"},[t._v("mdi-check")])],1),n("td",{staticClass:"font-weight-bold"},[t._v(t._s(e.rtp))]),n("td",{staticClass:"font-weight-bold"},[t._v(t._s(e.aPool))]),n("td",{staticClass:"font-weight-bold"},[t._v(t._s(e.bPool))]),n("td",{staticClass:"font-weight-bold"},[t._v(t._s(e.cPool))]),n("td",{staticClass:"font-weight-bold"},[t._v(t._s(e.dPool))])])})),0)])],1)],1)}),K=[],Q=a("bd3f"),U=a.n(Q),W={name:"AppBar",components:{vns:U.a},data:function(){return{expandJP:!0,expandTable:!0}},props:["seatData","account","currency","funds"]},X=W,Y=(a("7c41"),a("40dc")),Z=a("0789"),tt=a("adda"),et=a("2fa4"),at=a("2a7f"),nt=Object(p["a"])(X,G,K,!1,null,null,null),rt=nt.exports;y()(nt,{VAppBar:Y["a"],VBtn:P["a"],VCard:O["a"],VExpandTransition:Z["a"],VIcon:T["a"],VImg:tt["a"],VSimpleTable:A["a"],VSpacer:et["a"],VToolbarTitle:at["a"]});var st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{permanent:"",app:"",dark:"",width:"auto"}},t._l(t.seatData,(function(e,n){return a("v-list-item",{key:n},[a("v-container",[a("v-row",{key:1,staticClass:"mb-6"},[a("v-col",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v(" 座位： "),a("span",{staticClass:"amber--text font-weight-bold"},[t._v(t._s(e.rtp)+"號")])])],1)],1),a("v-row",{key:2,staticClass:"mb-6"},[a("v-col",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v(" 賠率： A池"),a("span",{staticClass:"red--text font-weight-bold"},[t._v(t._s(e.aPool))]),t._v(" / B池"),a("span",{staticClass:"red--text font-weight-bold"},[t._v(t._s(e.bPool))])])],1)],1),a("v-row",{key:3,staticClass:"mb-6"},[a("v-col",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v(" 門票費： "),a("span",{staticClass:"amber--text font-weight-bold"},[t._v(t._s(e.price))])])],1),a("v-col",[e.purchased?a("v-btn",{staticClass:"amber font-weight-bold"},[t._v("已被購買")]):a("v-btn",{staticClass:"amber font-weight-bold",on:{click:function(e){return t.buySeat(n)}}},[t._v("尚未購買")])],1)],1),a("v-divider",{attrs:{dark:""}})],1)],1)})),1)},it=[],ot={name:"seats",props:["seatData"],methods:{buySeat:function(t){this.$emit("onPurchase",t)}}},ct=ot,lt=Object(p["a"])(ct,st,it,!1,null,null,null),ut=lt.exports;y()(lt,{VBtn:P["a"],VCol:V["a"],VContainer:R["a"],VDivider:j["a"],VListItem:$["a"],VListItemTitle:D["b"],VNavigationDrawer:z["a"],VRow:B["a"]});var dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{ref:"box",staticClass:"prize",style:t.boxStyle},[a("v-scale-transition",{attrs:{origin:""}},["hidden"!==t.prizeStatus&&"opening"!==t.prizeStatus?a("img",{ref:"prize",style:t.prizeStyle,attrs:{src:t.prizeType},on:{click:function(e){return t.draw()}}}):t._e()]),a("v-scale-transition",{attrs:{origin:""}},["end"===t.prizeStatus?a("div",{ref:"glow"}):t._e()])],1),a("div",{ref:"outer",staticClass:"spinner outer"},[a("div",{staticClass:"pie-container"},[a("div",{staticClass:"pie-background"}),t._l(t.outerSlices,(function(e,n){return a("div",{key:n,class:e.hold.class,style:e.hold.style,attrs:{id:"outer-"+e.hold.id}},[a("div",{class:e.num.class,style:e.num.style},[t._v(" "+t._s(e.num.text)+" ")]),a("div",{class:e.pie.class,style:e.pie.style})])}))],2)]),a("div",{ref:"inner",staticClass:"spinner inner"},[a("v-icon",{staticClass:"bottle white--text text-h1",attrs:{"x-large":""}},[t._v("mdi-bottle-soda")]),a("transition",[a("div",{ref:"pie",staticClass:"pie-container"},[a("div",{staticClass:"pie-background"}),t._l(t.innerSlices,(function(e,n){return a("div",{key:n,class:e.hold.class,style:e.hold.style,attrs:{id:"inner-"+e.hold.id}},[a("div",{class:e.num.class,style:e.num.style},[t._v(" "+t._s(e.num.text)+" ")]),a("div",{class:e.pie.class,style:e.pie.style})])}))],2)])],1)])},pt=[],vt=(a("4de4"),a("caad"),a("2532"),a("99ee")),ht=a.n(vt),ft={name:"Roulette",data:function(){return{current:0,spinTime:10,numOrder:[1,2,3,4,5,6,7,8,9,10],numRed:[1,3,5,7,9],numBlack:[2,4,6,8,10],outerNumLoc:[],outerDeg:[36,36,36,36,36,36,36,36,36,36],outerSlices:[],innerNumLoc:[],innerDeg:[20,25,30,33,36,36,39,42,47,52],innerSlices:[],boxStyle:"",prizeStatus:"hidden",prizeStyle:"",prizeType:a("1799"),jp:!1}},mounted:function(){for(var t=0,e=0,a=10.7,n=0;n<this.numOrder.length;n++){this.outerNumLoc[this.numOrder[n]]=t,this.innerNumLoc[this.numOrder[n]]=e,t+=this.outerDeg[n],e+=this.innerDeg[n];var r={hold:{id:"outer-slice-"+(n+1),class:["hold"],style:"transform: rotate("+this.outerNumLoc[this.numOrder[n]]+"deg);"},num:{class:["num"],text:this.numOrder[n]},pie:{class:["pie"],style:"transform: rotate(36deg);"}},s={hold:{id:"inner-slice-"+(n+1),class:["hold"],style:"transform: rotate("+this.innerNumLoc[this.numOrder[n]]+"deg);"},num:{class:["num"],text:this.numOrder[n]},pie:{class:["pie"],style:"transform: rotate("+this.innerDeg[n]+"deg);"}};this.numOrder[n]>9?(r["num"]["style"]="left: 11.75em; top: 2.5em; transform: scale(2) rotate(15deg) !important;",s["num"]["style"]="left: "+(a-.77)+"em; top: 3.5em; transform: scale(2) rotate("+.43*this.innerDeg[n]+"deg) !important;"):(r["num"]["style"]="left: 12.02em; top: 2.5em; transform: scale(2) rotate(15deg) !important;",s["num"]["style"]="left: "+a+"em; top: 3em; transform: scale(2) rotate("+.43*this.innerDeg[n]+"deg) !important;"),a+=.27,this.numRed.includes(this.numOrder[n])?(r["pie"]["class"].push("red-bg"),s["pie"]["class"].push("grey-bg")):this.numBlack.includes(this.numOrder[n])&&(r["pie"]["class"].push("grey-bg"),s["pie"]["class"].push("red-bg")),this.outerSlices.push(r),this.innerSlices.push(s)}},methods:{sleep:function(t){return new Promise((function(e){return setTimeout(e,t)}))},spin:function(t){var e=this,a=t-1,n=Math.floor(Math.random()*this.innerDeg[a])+1,r=-360*this.spinTime+(360-this.innerNumLoc[t])-n,s=1e3*this.spinTime-4e3,i={0:{transform:"rotate(0deg)"},100:{transform:"rotate("+r+"deg)"}};ht.a.registerAnimation({name:"pieRotation",animation:i,presets:{duration:s,easing:"ease-in-out"}}),ht.a.runAnimation(this.$refs.pie,"pieRotation").then((function(){e.innerSlices[a]["pie"]["class"].push("highlight")}))},whirl:function(t,e,a,n){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var i,o,c,l,u;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:i=360*r.spinTime+r.outerNumLoc[t],o=0,c=1e3*r.spinTime,l=c/25,u=0;case 5:if(!(u<l)){s.next=19;break}return s.next=8,r.sleep(25);case 8:if(o===i){s.next=15;break}o+=36,r.outerSlices[r.current]["pie"]["class"]=r.outerSlices[r.current]["pie"]["class"].filter((function(t){return"highlight"!==t})),r.current=(r.current+1)%r.outerSlices.length,r.outerSlices[r.current]["pie"]["class"].push("highlight"),s.next=16;break;case 15:return s.abrupt("break",19);case 16:u++,s.next=5;break;case 19:return s.next=21,r.sleep(3e3);case 21:return r.spin(e),s.next=24,r.sleep(9e3);case 24:r.raffle(a,n);case 25:case"end":return s.stop()}}),s)})))()},raffle:function(t,e){var a=this.outerNumLoc[t]+18;this.boxStyle="transform: rotate("+a+"deg);",this.prizeStyle="transform: rotate(-"+a+"deg); animation: vibrate 0.5s infinite alternate",this.prizeStatus="show",this.jp=e},draw:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.prizeStatus="opening",e.next=3,t.sleep(1e3);case 3:return t.prizeType=t.jp?a("ebab"):a("c000"),t.prizeStatus="end",e.next=7,t.sleep(100);case 7:t.$refs.prize.style["animation"]="",t.$refs.glow.style["animation"]="glow 2s linear infinite alternate";case 9:case"end":return e.stop()}}),e)})))()}}},mt=ft,bt=(a("e9f8"),Object(p["a"])(mt,dt,pt,!1,null,null,null)),gt=bt.exports;y()(bt,{VIcon:T["a"],VScaleTransition:Z["c"]});var xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"amber dialog-btn",attrs:{fab:""}},"v-btn",r,!1),n),[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-information-variant")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{staticClass:"dialog-card"},[a("v-toolbar",{attrs:{dark:"",tabs:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab",[t._v(" 遊戲相關說明 ")]),a("v-tab",[t._v(" 隨機數說明 ")]),a("v-tabs-slider",{attrs:{color:"amber"}})],1)]},proxy:!0}])}),a("v-card-text",[a("v-tabs-items",{model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("遊戲介紹")])]),a("v-card-text",[t._v(" 此遊戲為10人對賭之遊戲，所有的購買金額將全數隨機分配給遊戲中玩家。 ")]),a("v-card-title",[a("span",{staticClass:"headline"},[t._v("遊戲規則")])]),a("v-card-text",[t._v(" 每10分鐘為一局，每局為10位玩家參與，如提早滿人則直接開始，遊戲中有1~10號共10個位置以及四個彩金獎池，位置購買的費用分別不同，每個位置的獎池獲獎機率也不同，開始前玩家可以選擇購買1~10號的任意位置，已被購買的位置將不能再進行購買，遊戲開始後，四個獎池分別進行開獎，並依照各獎池比例進行獎金派發，每個位置都有機會獲得四個獎池中的彩金。 ")]),a("v-card-title",[a("span",{staticClass:"headline"},[t._v("獎池介紹")])]),a("v-card-text",[a("ol",[a("li",{staticClass:"mb-5"},[t._v(" 大輪盤獎池：外圈輪盤轉動，最後停止位置即為中獎位置。每局必開一個位置，位置1到10的中獎機率相同。 ")]),a("li",{staticClass:"mb-5"},[t._v(" 小輪盤獎池：外圈輪盤轉動，最後停止位置即為中獎位置。每局必開一個位置，位置1到10的中獎機率依照購買位置費用成等比級距。 ")]),a("li",{staticClass:"mb-5"},[t._v(" 寶箱獎池-錢袋：輪盤外圍有閃爍寶箱，點擊後如為錢袋即為中獎。非每局必開出，單局有機率同時多開中獎，獲得獎金為該位置的門票費用。 ")]),a("li",[t._v(" 寶箱獎池-JP金幣寶箱：輪盤外圍有閃爍寶箱，點擊後如為金幣寶箱即為中獎。非每局必開出，單局只會有一個位置中獎，獲得獎金為Jackpot累積獎金，如沒有開出則獎金累積至下局。 ")])])]),a("v-card-title",[t._v(" 彩池獎金分配 ")]),a("v-card-text",[a("div",{staticClass:"mb-5"},[t._v("大輪盤獎池：每局門票金額30%")]),a("div",{staticClass:"mb-5"},[t._v("小輪盤獎池：每局門票金額35%")]),a("div",{staticClass:"mb-5"},[t._v("寶箱獎池-錢袋：每局門票金額10%")]),a("div",{staticClass:"mb-5"},[t._v(" 寶箱獎池-JP金幣寶箱：每局門票金額20% (每局累積) ")]),a("div",{staticClass:"mb-5"},[t._v("開發團隊：每局門票金額5%")])])],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("取得交易Hash")])]),a("v-card-text",[t._v(" 當最後一個位置被購買之後，合約觸發開獎產生隨機數依照最後一筆購買位置的 Transation Hash 進行運算。 ")]),a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Hash運算")])]),a("v-card-text",[t._v(" 取 Transaction Hash 前39個字串， 每三個字串為一組開獎結果總共13組， 將每組開獎結果進行16進位轉10進位運算， 再除以最大值4096，計算後的數字將落在 0~1 之間， 再依照各池的權重判斷分別是落在哪個區間範圍，即為中獎結果。 ")]),a("v-card-title",[a("span",{staticClass:"headline"},[t._v("隨機數結果")])]),a("v-card-text",[a("div",{staticClass:"mb-5"},[t._v("13組結果分別對應")]),a("div",{staticClass:"mb-5"},[t._v("1組外輪盤")]),a("div",{staticClass:"mb-5"},[t._v("1組內輪盤")]),a("div",{staticClass:"mb-5"},[t._v("1-10共10組金幣袋")]),a("div",{staticClass:"mb-5"},[t._v("1組JackPot獎金")])])],1)],1)],1)],1)],1)],1)},_t=[],wt={name:"Dialog",data:function(){return{dialog:!1,tabs:null}}},Ct=wt,yt=(a("4f49"),a("99d9")),kt=a("169a"),St=a("71a3"),Pt=a("c671"),Ot=a("fe57"),Vt=a("aac8"),Rt=a("9a96"),jt=a("71d9"),Tt=Object(p["a"])(Ct,xt,_t,!1,null,null,null),It=Tt.exports;y()(Tt,{VBtn:P["a"],VCard:O["a"],VCardText:yt["a"],VCardTitle:yt["b"],VDialog:kt["a"],VIcon:T["a"],VTab:St["a"],VTabItem:Pt["a"],VTabs:Ot["a"],VTabsItems:Vt["a"],VTabsSlider:Rt["a"],VToolbar:jt["a"]});var $t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{timeout:"-1"},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[a("v-btn",t._b({attrs:{color:"amber",to:{name:"hall"},icon:"",rounded:""}},"v-btn",n,!1),[a("v-icon",{attrs:{large:""}},[t._v("mdi-home")])],1)]}}]),model:{value:t.toast,callback:function(e){t.toast=e},expression:"toast"}},[a("span",{staticClass:"font-weight-bold"},[t._v("此局已結束，請點此回到大廳")])])},Dt=[],Et={name:"Toast",data:function(){return{toast:!1}},methods:{show:function(){this.toast=!0}}},Lt=Et,zt=a("2db4"),Bt=Object(p["a"])(Lt,$t,Dt,!1,null,null,null),Nt=Bt.exports;y()(Bt,{VBtn:P["a"],VIcon:T["a"],VSnackbar:zt["a"]});var At=a("842a"),Jt=a.n(At);c.a.plugins(new Jt.a);var Mt={name:"Room",components:{Seats:ut,AppBar:rt,Roulette:gt,Dialog:It,Toast:Nt},data:function(){return{eos:null,a:null,b:null,c:null,d:null,seatData:[{purchased:0,rtp:"1",aPool:"5.7",bPool:"6.65",cPool:"1",dPool:"200.0",price:"1.0000 EOS"},{purchased:0,rtp:"2",aPool:"4.75",bPool:"5.54",cPool:"1",dPool:"166.7",price:"1.2000 EOS"},{purchased:0,rtp:"3",aPool:"4.07",bPool:"4.75",cPool:"1",dPool:"142.9",price:"1.4000 EOS"},{purchased:0,rtp:"4",aPool:"3.56",bPool:"4.16",cPool:"1",dPool:"125.0",price:"1.6000 EOS"},{purchased:0,rtp:"5",aPool:"3.17",bPool:"3.69",cPool:"1",dPool:"111.1",price:"1.8000 EOS"},{purchased:0,rtp:"6",aPool:"2.85",bPool:"3.33",cPool:"1",dPool:"100.0",price:"2.0000 EOS"},{purchased:0,rtp:"7",aPool:"2.59",bPool:"3.02",cPool:"1",dPool:"90.9",price:"2.2000 EOS"},{purchased:0,rtp:"8",aPool:"2.38",bPool:"2.77",cPool:"1",dPool:"83.3",price:"2.4000 EOS"},{purchased:0,rtp:"9",aPool:"2.19",bPool:"2.56",cPool:"1",dPool:"76.9",price:"2.6000 EOS"},{purchased:0,rtp:"10",aPool:"2.04",bPool:"2.38",cPool:"1",dPool:"71.4",price:"2.8000 EOS"}],funds:0,gameStatus:0}},beforeCreate:function(){document.body.className="room"},mounted:function(){var t=this;setInterval(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$parent.rpc){e.next=2;break}return e.abrupt("return");case 2:if(t.$parent.rpc.get_table_rows({json:!0,code:"stb",scope:"stb",table:"jp",limit:1,reverse:!0}).then((function(e){t.funds=e["rows"][0]["funds"],t.funds=t.funds.replace(" EOS",""),t.funds=1e4*parseFloat(t.funds)})),!(t.gameStatus<4)){e.next=6;break}return e.next=6,t.$parent.rpc.get_table_rows({json:!0,code:"stb",scope:"stb",table:"rounds",lower_bound:parseInt(t.$route.params.id),limit:1}).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.gameStatus=a["rows"][0]["status"],n=0;n<10;n++)t.seatData[n]["purchased"]=a["rows"][0]["seats"][n]["status"];return e.next=4,a["rows"][0]["seats"].forEach((function(e,a){if(e["win"]>0){var n=e["win"].toString(2);while(n.length<4)n="0"+n;"1"===n[3]&&(t.a=a+1),"1"===n[2]&&(t.b=a+1),"1"===n[1]&&(t.c=a+1,t.d=!1),"1"===n[0]&&(t.c=a+1,t.d=!0)}}));case 4:if(!(t.gameStatus>0)||null===t.a&&null===t.b&&null===t.c&&null===t.d){e.next=9;break}return t.gameStatus=4,e.next=8,t.$refs.spinner.whirl(t.a,t.b,t.c,t.d);case 8:t.$refs.popup.show();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)}))),1e3)},destroyed:function(){document.body.className=""},methods:{onPurchase:function(t){this.$parent.eos.transact({actions:[{account:"eosio.token",name:"transfer",authorization:[{actor:this.$parent.account.name,permission:this.$parent.account.authority}],data:{from:this.$parent.account.name,to:"stb",quantity:this.seatData[t].price,memo:"Round ".concat(this.$route.params.id,";Seat ").concat(t)}}]},{blocksBehind:3,expireSeconds:30})}}},Ht=Mt,qt=(a("5ca1"),Object(p["a"])(Ht,q,F,!1,null,null,null)),Ft=qt.exports;y()(qt,{VApp:k["a"]}),n["a"].use(f["a"]);var Gt=[{path:"/",name:"hall",component:H},{path:"/room/:id",name:"room",component:Ft}],Kt=new f["a"]({mode:"hash",base:"/hackathon-stb/",routes:Gt}),Qt=Kt,Ut=a("f309");n["a"].use(Ut["a"]);var Wt=new Ut["a"]({});n["a"].config.productionTip=!1,new n["a"]({router:Qt,vuetify:Wt,render:function(t){return t(h)}}).$mount("#app")},"5ca1":function(t,e,a){"use strict";a("f255")},"6a82":function(t,e,a){},"6efb":function(t,e,a){},"7c41":function(t,e,a){"use strict";a("50e6")},"8d62":function(t,e,a){},c000:function(t,e,a){t.exports=a.p+"img/bag.f09e9612.png"},cf29:function(t,e,a){"use strict";a("8d62")},e9f8:function(t,e,a){"use strict";a("6efb")},ebab:function(t,e,a){t.exports=a.p+"img/jp.049e4e60.png"},f255:function(t,e,a){}});
//# sourceMappingURL=app.2c65ab2e.js.map